(function(c,b){var a=function(){this.init(this.param())};a.prototype={init:function(d){this.config=d;this.render()},render:function(){var e=this,d=e.config;if(d&&d.widgetop==="edit"){e.edit()}else{if(d&&d.widgetop==="add"){e.add()}else{return false}}},add:function(){var e=this;e.addOperate();var d=c(".segment");c.each(d,function(g,j){var h=c(j).attr("data-segment-config"),f=c.parseJSON(h).cid;if(f===e.addOperate){if(e.addOperate==="TOP"){e.doadd(c(this).find("div.region"))}else{if(e.addOperate==="CONTENT"){e.addRegion(this)}}}})},doadd:function(f){var e=this,d=e.addIndex();new b.diy.ModListDialog(f,-1,{success:function(j){var l=j.node,i=c("ul.mod-tabs li",l),h=d[0];if(0<h&&h<=i.length){h=h-1}else{h=0}i.eq(h).click();var m=c("div.mod-list-group",l).eq(h),k=c("ul.group-tabs li",m),g=d[1];if(0<g&&g<=k.length){g=g-1}else{g=0}k.eq(g).click()}})},addOperate:function(){var e=this;if(e.config&&e.config.region){var d=e.config.region;if(d==="head"){e.addOperate="TOP"}else{if(d==="side"||d==="main"){e.addOperate="CONTENT"}}}},addRegion:function(f){var d=this,e=c(f).find("div.region");c.each(e,function(k,m){var l=c(m).attr("data-region-config"),j=c.parseJSON(l).cid,g=d.config.region,h=g.toLocaleUpperCase();if(j===h){d.doadd(c(this))}})},addIndex:function(){var f=this;var e=f.config;if(e&&e.widgetlevel){var g=e.widgetlevel,d=g.split("-");return(d)}},edit:function(){var e=this;var d=c(c(".mod-box"));c.each(d,function(g,m){var j=c(m).attr("data-box-config"),f=c.parseJSON(j).cid;if(e.config&&f===e.config.widgetid){var l=d.eq(g),h=c(window).height(),k=l.offset().top;if(h/2>=k){c(document).scrollTop(0)}else{if(k<=h){c(document).scrollTop(k-(h/2))}else{c(document).scrollTop(k-((h-300)/2))}}b.diy.ModBox.edit(l);return false}})},param:function(){var f=window.location.hash;str=f.replace("#","").split("&");var d=[];d.push("{");c.each(str,function(g,h){if(g===0){d.push('"'+h.replace("=",'":"')+'"')}else{d.push(',"'+h.replace("=",'":"')+'"')}});d.push("}");if(d.join("")==='{""}'){return false}else{var e=c.parseJSON(d.join(""));return e}}};c(function(d){new a()})})(jQuery,Platform.winport);
