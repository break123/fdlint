(function(e,d){var a=d.widget.Dialog,b=d.diy.Diy;var c={init:function(){var f=e("textarea.template-mod-not-supported-panel").val();if(!f){return}this.showDialog(f);this.initUpgradeGuidePanel();this.initUpgradeConfirmPanel()},showDialog:function(g){var f={header:"живЊЬсаб",className:"mod-not-supported-dialog",hasClose:false,draggable:true,content:g};this.dialog=a.open(f);this.panel=e("div.mod-not-supported-panel",this.dialog.node);this.guidePart=e("div.upgrade-guide-part",this.panel);this.confirmPart=e("div.upgrade-confirm-part",this.panel)},initUpgradeGuidePanel:function(){this.initModList();this.handleUpgradeConfirm();this.handleUpgradeCancel()},initModList:function(){var f=e("ul.mod-list",this.guidePart);f.delegate("li a","click",function(g){g.preventDefault()})},handleUpgradeConfirm:function(){var f=this,g=e("a.confirm",this.guidePart);g.click(function(){f.guidePart.hide();f.confirmPart.show()})},handleUpgradeCancel:function(){var f=this,i=e("a.cancel",this.guidePart),j=e("div.loading",this.panel),g=this.panel.data("node-config").cleanUnGrantedUrl,h=e("#doc").data("doc-config");i.click(function(k){k.preventDefault();f.guidePart.hide();j.show();b.authAjax(g,{type:"POST",data:{_csrf_token:h._csrf_token},success:function(l){window.location.reload()}})})},initUpgradeConfirmPanel:function(){var g=this,f=e("a.confirm,a.cancel",this.confirmPart);f.click(function(h){h.preventDefault();g.dialog.close();window.location.reload()})}};d.PageContext.register("~NotSupportedPanel",c)})(jQuery,Platform.winport);