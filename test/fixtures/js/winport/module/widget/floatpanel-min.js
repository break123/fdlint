(function(b,a){var c=function(d,e){this._init.apply(this,arguments)};c.prototype={_init:function(d,e){this.panel=b(d).eq(0);this.options=e||{};this.link=b(this.options.handler);this._handleLink();this._handleClose();this._handleCloseOnBlur();this._handleAutoClose()},_handleLink:function(){var d=this;this.link.bind(this.options.event||"click",function(){d.clear();if(!d.isShow){d.show()}else{if(d.options.toggle){d.hide()}}});this.link.click(function(f){var g=b(this);if(g.is("a")&&g.attr("href")==="#"){f.preventDefault()}});this.hide()},_handleClose:function(){var d=this;b(".close",this.panel).click(function(){d.hide();return false})},_handleCloseOnBlur:function(){if(this.options.closeOnBlur===false){return}var d=this;b(document).click(function(g){if(!d.isShow){return}var f=g.target;if(f!==d.link[0]&&f!==d.panel[0]&&d.link.has(f).length===0&&d.panel.has(f).length===0){d.hide()}})},_handleAutoClose:function(){var f=this.options.autoClose;if(f===false){return}var e=this,h=b(this.panel).add(this.link),i=parseInt(f,10)||3000,d=b.proxy(this,"clear"),g=b.proxy(this,"hide");h.mouseleave(function(){e.clear();e._timer=setTimeout(g,i);h.one("mousemove",d)})},clear:function(){this._timer&&clearTimeout(this._timer);this._timer=null},show:function(){if(this.isShow){return}if(this.options.beforeShow&&this.options.beforeShow()===false||this.panel.triggerHandler("before")===false){return}this.isShow=true;this._op("show");this.options.onshow&&this.options.onshow();this.panel.triggerHandler("show");b.log("floatpanel show ");b.log(this.panel[0])},hide:function(){if(!this.isShow){return}this.isShow=false;this._op("hide");this.options.onhide&&this.options.onhide();this.panel.triggerHandler("hide");b.log("floatpanel hide ");b.log(this.panel[0])},_op:function(d){var f=this.panel[0],e=this.options[d];return e?e.call(f,f):this.panel[d]()}};a.widget.FloatPanel=c;b.add("wp-floatpanel")})(jQuery,Platform.winport);