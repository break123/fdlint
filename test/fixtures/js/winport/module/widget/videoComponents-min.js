(function(d,b){var e=function(){};e.prototype={RequestData:function(f,g){jQuery.ajax({url:f+"?t="+new Date().getTime(),dataType:"script",type:"get",complete:function(){g&&g(window.resultdata)},error:function(){}})}};var a=new e();var c=function(f){this.init.apply(this,arguments)};c.prototype={init:function(h){var g=this;this.num=h.num;this.data=h.data;if(h.type=="id"){this.type=2}else{this.type=""}this.videoUsed=h.videoUsed;this.insert=h.insert;function f(j){g.data=j;g._init()}this.data.RequestData(this.data.config.url,f)},_init:function(h){var g=this;var f=this.data;if(f.isSuccess=="true"){g.VideoRender(f)}else{alert(f.data.message)}},bind:function(){var f=this;d(".vas_videoComponents_insert").bind("click",function(){if(this.getAttribute("Status")=="refused"||this.innerHTML=="\u5df2\u63d2\u5165\u89c6\u9891"){return false}else{if(f.insertVideo(this.getAttribute("vid"+f.type))){f.insert(f.insertVideo(this.getAttribute("vid"+f.type)))}}});d(".vas_videoComponents_myvideo_video").bind("mouseover",function(){d(this).addClass("vas_videoComponents_bg")});d(".vas_videoComponents_myvideo_video").bind("mouseout",function(h){var h=h||window.event,g=h.toElement||h.relatedTarget;while(g&&g!=this){g=g.parentNode}if(!g){d(this).removeClass("vas_videoComponents_bg")}})},insertVideo:function(f){var k=this;var j=d(".vas_videoComponents_insert"),h=d(".vas_videoComponents_myvideo_video");for(i=0;i<j.length;i++){j[i].innerHTML=d(j[i]).attr("vid"+k.type)==f?"\u5df2\u63d2\u5165\u89c6\u9891":d(j[i]).attr("Status")=="refused"?"":"\u63d2\u5165\u89c6\u9891";if(j[i].innerHTML=="\u5df2\u63d2\u5165\u89c6\u9891"){var g=k.data.data[i];d(h[i]).addClass("vas_videoComponentsbg")}else{if(j[i].innerHTML==""){d(j[i]).addClass("vas_videoComponentbg2")}d(h[i]).removeClass("vas_videoComponentsbg")}}return g},checkapproved:function(g){var f=[];if(g.auditStatus=="approved"){f.push("<li>");f.push('<object id="video_player" type="application/x-shockwave-flash" data="http://player.ku6.com/refer/'+g.videoInfo.id+'/v.swf&amp;auto=0&amp;deflogo=0&amp;adss=0&amp;jump=0&amp;fu=1&amp;recommend=0" height="194" width="200">');f.push('<!--[if lt IE 9.0]><param name="movie" value="http://player.ku6.com/refer/'+g.videoInfo.id+'/v.swf&amp;auto=0&amp;deflogo=0&amp;adss=0&amp;jump=0&amp;fu=1&amp;recommend=0"><![endif]-->');f.push('<param name="quality" value="high">');f.push('<param name="allowScriptAccess" value="always">');f.push('<param name="allowFullScreen" value="true">');f.push('<param name="wMode" value="Transparent">');f.push('<param name="swLiveConnect" value="true">');f.push('<param name="flashvars" value="">');f.push('<video controls height="194" width="200" src="http://v.ku6.com/fetchwebm/'+g.videoInfo.id+'.m3u8"></video>');f.push("</object></li>")}else{f.push('<li style=" position:relative">');f.push('<img src="http://img.s.aliimg.com/vaspool/video/images/pic_01.jpg" width="200" height="194" />');f.push('<ul class="vas_videoComponents_fail clearFix">');if(g.auditStatus=="init"){f.push('<li class="vas_videoComponents_failicon1"></li>');f.push('<li class="vas_videoComponents_failmsg">\u89c6\u9891\u5ba1\u6838\u4e2d...<br />\u5b8c\u6210\u540e\u4f1a\u81ea\u52a8\u663e\u793a</li>')}else{if(g.auditStatus=="refused"){f.push('<li class="vas_videoComponents_failicon"></li>');f.push('<li class="vas_videoComponents_failmsg">\u89c6\u9891'+g.refuseMessage+"<br />\u5ba1\u6838\u4e0d\u901a\u8fc7</li>")}}f.push("</ul></li>")}return f.join("")},VideoRender:function(j){var h=this;var f=[];f.push('<div class="vas_videoComponents_myvideo">');f.push('<div class="vas_videoComponents_myvideo_T clearFix">');f.push('<h2>\u6211\u7684\u89c6\u9891</h2><h2 class="vas_videoComponents_myvideo_C">');f.push('<p>\u4f60\u6700\u591a\u53ef\u4ee5\u4e0a\u4f20<span class="vas_videoComponents_myvideo_N">'+this.num+'</span>\u4e2a\u89c6\u9891\uff0c\u5df2\u4e0a\u4f20<span class="vas_videoComponents_myvideo_N" id="offervideoNum">'+j.data.length+"</span>\u4e2a\u89c6\u9891</p>");f.push('<span class="vas_videoComponents_check"><a href="'+this.data.basePath+'" target="_blank" id="offer_video_upload">\u4e0a\u4f20\u89c6\u9891</a></span>');f.push("</h2></div>");if(j.data==undefined||resultdata.data.length==0){f.push('<div class="vas_videoComponents_myvideo_videoList clearFix">');f.push('<p class="vas_videoComponents_myvideo_novideo">\u4f60\u8fd8\u6ca1\u6709\u4e0a\u4f20\u89c6\u9891\uff0c\u8bf7\u70b9\u51fb\u8fdb\u5165<a href="'+this.data.basePath+'" target="_blank" style="color:#ff7300;">\u89c6\u9891\u4e2d\u5fc3</a>\uff0c\u4e0a\u4f20\u89c6\u9891</p></div>')}else{f.push('<div class="vas_videoComponents_myvideo_trip clearFix" id="offer_Tips">');f.push("<p>\u6e29\u99a8\u63d0\u793a\uff1a\u53ef\u63d2\u5165\u5ba1\u6838\u4e2d\u7684\u89c6\u9891\uff0c\u89c6\u9891\u5ba1\u6838\u901a\u8fc7\u540e\uff0c\u5728\u63d2\u5165\u7684\u9875\u9762\u4e0a\u81ea\u52a8\u5c55\u793a\u3002</p>");f.push('</div><div class="vas_videoComponents_myvideo_videoList clearFix">');for(var g=0;g<j.data.length;g++){f.push('<div class="vas_videoComponents_myvideo_video"><ul>');f.push(h.checkapproved(j.data[g]));f.push('<li class="vas_videoComponents_myvideo_videoName">'+resultdata.data[g].fileName+"</li>");f.push('<li class="vas_videoComponents_myvideo_videoRevise">');f.push('<a href="javascript:void(0);" class="vas_videoComponents_insert" hidefocus="true" Status="'+j.data[g].auditStatus+'" vid="'+resultdata.data[g].videoInfo.id+'" vid2="'+resultdata.data[g].id+'">\u63d2\u5165\u89c6\u9891</a>');f.push("</li></ul></div>")}}f.push("</div></div>");d("#vas_videoComponents_wrap").html(f.join(""));h.insertVideo(h.videoUsed);this.bind()}};b.widget.InsertVideo=c;b.widget.VasVideoDataList=a})(jQuery,Platform.winport);
